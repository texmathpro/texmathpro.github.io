<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>TeXMathPro Catalog</title>
<script src=https://cdn.tailwindcss.com></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel=stylesheet><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black"><meta name=theme-color content="#2c5282"><script async src="https://www.googletagmanager.com/gtag/js?id=G-0BXPTH0XNR"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date)</script><style>body{font-family:inter,sans-serif;background-color:#f7fafc}.product-card{transition:all .3s ease}.product-card:hover{transform:translateY(-3px);box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,5%)}.custom-scrollbar::-webkit-scrollbar{width:6px}.custom-scrollbar::-webkit-scrollbar-thumb{background:#4a5568;border-radius:3px}.custom-scrollbar::-webkit-scrollbar-track{background:#edf2f7}.filter-button{transition:background-color .15s}.active-filter{background-color:#2c5282!important;color:#fff!important;font-weight:600}.freebie-card{border:3px solid #f97316}</style></head><body class="bg-gray-50 text-gray-800"><div id=loading class="fixed inset-0 bg-gray-50 flex flex-col items-center justify-center z-50"><svg class="animate-spin -ml-1 mr-3 h-10 w-10 text-blue-800" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentcolor" stroke-width="4"/><path class="opacity-75" fill="currentcolor" d="M4 12a8 8 0 018-8V0C5.373.0.0 5.373.0 12h4zm2 5.291A7.962 7.962.0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/></svg><p class="mt-4 text-lg font-semibold text-gray-600">Loading TeXMathPro Catalog...</p></div><div id=error-message class="hidden fixed inset-0 bg-red-100 flex items-center justify-center z-50 p-6"><div class="bg-white p-6 rounded-lg shadow-xl border-2 border-red-500 max-w-lg"><h2 class="text-xl font-bold text-red-700 mb-3">Data Loading Error</h2><p class=text-gray-700>The application could not retrieve data from the Google Sheet. Please ensure the sharing settings are set to "Anyone with the link can view."</p><p class="mt-3 text-sm text-red-500">Spreadsheet ID: 1LaJ0Hq7V-GPoCupAk-sm1i3e2k4cuEbRpo7eLKoJ9SQ</p></div></div><div id=app class="max-w-7xl mx-auto p-4 md:p-8 hidden"><header class="mb-8 border-b-4 border-blue-900 pb-6 bg-white rounded-b-xl shadow-lg relative"><div class="flex flex-col md:flex-row justify-center items-center px-4 pt-4 md:px-8"><div class="text-center mb-4 md:mb-0"><a href=# onclick="return clearAllFilters(event),!1" class="inline-block hover:opacity-90 transition duration-150"><img src=https://i.imgur.com/kiFfMas.jpeg alt="TeXMathPro Logo - Aesthetics-Oriented Math Materials" class="w-48 md:w-64 mx-auto h-auto" onerror='this.onerror=null,this.src="https://placehold.co/256x64/2C5282/ffffff?text=TeXMathPro"'></a><p class="mt-2 text-md text-gray-600 max-w-3xl mx-auto font-semibold">Professional, publication-quality digital materials for high school Math teachers</p></div></div></header><div class="flex flex-col lg:flex-row gap-8"><aside id=filter-sidebar class="w-full lg:w-64 bg-white p-6 rounded-xl shadow-lg h-full lg:sticky lg:top-8 custom-scrollbar"><h2 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2">Filter Materials</h2><div class=mb-6><label for=search class="block text-sm font-medium text-gray-700 mb-2">Search Keywords (Tags/Title)</label>
<input type=text id=search placeholder="Search summative test, quiz, grade 8..." class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"></div><div class=space-y-6><div id=filter-grade-level><h3 class="font-semibold text-lg text-blue-700 mb-3">Grade Level</h3></div><div id=filter-topic><h3 class="font-semibold text-lg text-blue-700 mb-3">Topic</h3></div><div id=filter-product-type><h3 class="font-semibold text-lg text-blue-700 mb-3">Resource Type</h3></div></div><button id=clear-filters class="w-full mt-6 py-2 px-4 bg-gray-500 text-white font-semibold rounded-lg shadow hover:bg-gray-600 transition duration-150">
Clear All Filters</button></aside><main class=flex-1><div id=freebie-list class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6 mb-8"></div><div id=product-list class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6"></div><div id=no-results class="hidden text-center p-12 bg-white rounded-xl shadow-lg mt-8"><p class="text-2xl font-semibold text-gray-600">No materials matched your search or filters.</p><p class="mt-2 text-gray-500">Try adjusting your filters or clearing your search term.</p></div></main></div></div><script>const manifestData={name:"TeXMathPro Catalog",short_name:"TeXMathPro",description:"Publication-quality math materials catalog.",start_url:".",display:"standalone",background_color:"#f7fafc",theme_color:"#2c5282",icons:[{src:"https://i.imgur.com/GnMzsoN.jpeg",sizes:"192x192",type:"image/jpeg"},{src:"https://i.imgur.com/GnMzsoN.jpeg",sizes:"512x512",type:"image/jpeg"}]},swScript=`
            const CACHE_NAME = 'texmathpro-cache-v3'; 
            const urlsToCache = [
                '/',
                'https://cdn.tailwindcss.com',
                'https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap',
                'https://i.imgur.com/kiFfMas.jpeg', // Logo
                'https://i.imgur.com/GnMzsoN.jpeg' // Icon
            ];

            self.addEventListener('install', (event) => {
              event.waitUntil(
                caches.open(CACHE_NAME)
                  .then((cache) => {
                    console.log('SW: Opened cache, attempting to cache core assets.');
                    return cache.addAll(urlsToCache).catch(err => {
                        console.error('SW: Failed to cache some assets.', err);
                    });
                  })
              );
            });

            // Ensure the SW takes control immediately
            self.addEventListener('activate', (event) => {
              event.waitUntil(self.clients.claim());
              console.log('SW: Activated and claimed control of clients.');
            });

            self.addEventListener('fetch', (event) => {
                // IMPORTANT: Do NOT cache the live spreadsheet data (docs.google.com/spreadsheets)
                if (event.request.url.includes('docs.google.com/spreadsheets')) {
                    return fetch(event.request);
                }

                // For static assets, try cache first, then network
                event.respondWith(
                    caches.match(event.request)
                        .then((response) => {
                            if (response) {
                                return response;
                            }
                            return fetch(event.request);
                        })
                );
            });
        `;function generateManifest(){try{const t=new Blob([JSON.stringify(manifestData)],{type:"application/json"}),n=URL.createObjectURL(t),e=document.createElement("link");e.rel="manifest",e.href=n,document.head.appendChild(e),console.log("PWA Manifest registered successfully.")}catch(e){console.error("Failed to register PWA Manifest.",e)}}function registerServiceWorker(){if("serviceWorker"in navigator){const e=new Blob([swScript],{type:"application/javascript"}),t=URL.createObjectURL(e);navigator.serviceWorker.register(t,{scope:"/"}).then(e=>{console.log("Service Worker registered with scope:",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})}else console.warn("Service Workers are not supported in this browser.")}generateManifest(),registerServiceWorker();let allProducts=[],freebieProducts=[];const filterFieldMap={grade:"GradeLevel",topic:"Topic",type:"ProductType"};let state={searchQuery:"",filters:{ProductID:null,GradeLevel:null,Topic:null,ProductType:null}};const SPREADSHEET_ID="1LaJ0Hq7V-GPoCupAk-sm1i3e2k4cuEbRpo7eLKoJ9SQ",GID=0,GOOGLE_VIZ_URL=`https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:json&gid=${GID}`,GA_MEASUREMENT_ID="G-0BXPTH0XNR";function trackEvent(e,t={}){typeof gtag=="function"&&GA_MEASUREMENT_ID!=="G-XXXXXXXXXX"&&gtag("event",e,t)}const formatCurrency=e=>typeof e!="number"||isNaN(e)?"":"₱"+e.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2}),getCellValue=(e,t)=>{const n=e.c[t];return n?n.f!==void 0?String(n.f).trim():n.v!==void 0?typeof n.v=="boolean"?n.v:typeof n.v=="number"&&n.v!==null?n.v:String(n.v).trim():"":""},findColumnIndex=(e,t)=>{for(const s of t){const n=e.indexOf(s);if(n!==-1)return n}return-1};function buildProductFilterUrl(e){const t=window.location.origin+window.location.pathname,n=new URLSearchParams;e.ProductID&&n.append("id",encodeURIComponent(e.ProductID));const s=n.toString();return s?`${t}?${s}`:t}function handleShareClick(e,t){t.preventDefault(),t.stopPropagation();const n=t.currentTarget,o=allProducts.find(t=>t.ProductID===e)||freebieProducts.find(t=>t.ProductID===e);if(!o){console.error("Product not found for sharing:",e);return}const s=buildProductFilterUrl(o);if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(s).then(()=>{const t=n.innerHTML;n.innerHTML='<span class="flex items-center"><svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Copied!</span>',n.classList.remove("bg-gray-400","hover:bg-gray-500"),n.classList.add("bg-green-600","hover:bg-green-700"),setTimeout(()=>{n.innerHTML=t,n.classList.remove("bg-green-600","hover:bg-green-700"),n.classList.add("bg-gray-400","hover:bg-gray-500")},2e3),trackEvent("share_product_id_copied",{product_id:e,shared_url:s,method:"clipboard_api"})}).catch(e=>{console.error("Could not copy text: ",e),alert(`Failed to copy link. Please manually copy: ${s}`)});else{const t=document.createElement("input");t.value=s,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert(`Link copied: ${s}`),trackEvent("share_product_id_copied",{product_id:e,shared_url:s,method:"fallback_alert"})}}window.handleShareClick=handleShareClick;function parseUrlFilters(){const t=new URLSearchParams(window.location.search);let e=!1;const n=t.get("id");if(n)return state.filters.ProductID=decodeURIComponent(n),state.searchQuery="",state.filters.GradeLevel=null,state.filters.Topic=null,state.filters.ProductType=null,e=!0,!0;const s=t.get("search");s&&(state.searchQuery=decodeURIComponent(s).toLowerCase().trim(),e=!0);for(const n in filterFieldMap){const o=filterFieldMap[n],s=t.get(n);s&&(state.filters[o]=decodeURIComponent(s),e=!0)}return e}async function fetchProducts(){try{const i=await fetch(GOOGLE_VIZ_URL),o=await i.text(),a=o.substring(47,o.length-2),n=JSON.parse(a);if(typeof gtag=="function"&&GA_MEASUREMENT_ID!=="G-XXXXXXXXXX"&&gtag("config",GA_MEASUREMENT_ID,{page_title:"Catalog Viewer",page_path:"/",send_page_view:!0}),!n||!n.table||!n.table.rows||n.table.rows.length===0)throw new Error("No data table found in sheet response.");const t=n.table.cols.map(e=>e.label),s=[],r=parseUrlFilters(),e={ProductID:findColumnIndex(t,["ProductID","Product ID"]),ProductTitle:findColumnIndex(t,["ProductTitle","Product Title","Title"]),GradeLevel:findColumnIndex(t,["GradeLevel","Grade Level","Grade"]),Topic:findColumnIndex(t,["Topic"]),ProductType:findColumnIndex(t,["ProductType","Product Type","Resource Type"]),ShortDescription:findColumnIndex(t,["ShortDescription","Short Description","Description"]),PricePHPRegular:findColumnIndex(t,["PricePHPRegular","Price PHP Regular","Price"]),PricePHPDiscounted:findColumnIndex(t,["PricePHPDiscounted","Price PHP Discounted","Discounted Price"]),IsDiscounted:findColumnIndex(t,["IsDiscounted","Is Discounted"]),ProductPagePath:findColumnIndex(t,["ProductPagePath","Product Page Path"]),FilePath:findColumnIndex(t,["FilePath","File Path"]),ImageURL:findColumnIndex(t,["ImageURL","Image URL"]),InStock:findColumnIndex(t,["InStock","In Stock"]),Tags:findColumnIndex(t,["Tags"])};n.table.rows.forEach(t=>{if(e.ProductTitle===-1||e.PricePHPRegular===-1||e.ProductPagePath===-1){console.error("Missing essential column headers. Check your Google Sheet structure and ensure titles like 'ProductTitle', 'PricePHPRegular', and 'ProductPagePath' (or variations) exist.");return}const r=getCellValue(t,e.IsDiscounted),n=getCellValue(t,e.PricePHPRegular),o=getCellValue(t,e.PricePHPDiscounted),i=typeof n=="number"?n:parseFloat(n)||0,a=typeof o=="number"?o:parseFloat(o)||i,c=String(r).toLowerCase()==="true"||a===.01;getCellValue(t,e.ProductTitle)&&i>0&&s.push({ProductID:getCellValue(t,e.ProductID),ProductTitle:getCellValue(t,e.ProductTitle),GradeLevel:getCellValue(t,e.GradeLevel),Topic:getCellValue(t,e.Topic),ProductType:getCellValue(t,e.ProductType),ShortDescription:getCellValue(t,e.ShortDescription),PricePHPRegular:i,PricePHPDiscounted:a,IsDiscounted:c,ProductPagePath:getCellValue(t,e.ProductPagePath),FilePath:getCellValue(t,e.FilePath),ImageURL:getCellValue(t,e.ImageURL)||`https://placehold.co/400x300/4A5568/ffffff?text=${encodeURIComponent(getCellValue(t,e.ProductTitle))}`,InStock:String(getCellValue(t,e.InStock)).toLowerCase()==="true",Tags:getCellValue(t,e.Tags)})}),freebieProducts=s.slice(0,2),allProducts=s.slice(2),initFilters(),renderProducts()}catch(e){console.error("Failed to load spreadsheet data:",e),document.getElementById("error-message").classList.remove("hidden")}finally{document.getElementById("loading").classList.add("hidden"),document.getElementById("app").classList.remove("hidden")}}function getUniqueValues(e){const t=allProducts.map(t=>t[e]).filter(Boolean),n=[...new Set(t)].sort((t,n)=>{if(e==="GradeLevel"){const e=e=>{if(e.toLowerCase()==="k")return 0;if(e.toLowerCase()==="p")return-1;const t=e.split("-");return parseInt(t[0])||1/0};return e(t)-e(n)}return String(t).localeCompare(String(n))});return n}function initFilters(){if(state.filters.ProductID){document.getElementById("search").value="",document.getElementById("search").disabled=!0,document.getElementById("filter-grade-level").innerHTML="",document.getElementById("filter-topic").innerHTML="",document.getElementById("filter-product-type").innerHTML="",document.getElementById("clear-filters").disabled=!0;return}document.getElementById("search").disabled=!1,document.getElementById("clear-filters").disabled=!1;const t=[{field:"GradeLevel",id:"filter-grade-level",paramKey:"grade"},{field:"Topic",id:"filter-topic",paramKey:"topic"},{field:"ProductType",id:"filter-product-type",paramKey:"type"}],e=document.getElementById("search");e.value=state.searchQuery,e.addEventListener("input",handleSearchInput),t.forEach(({field:e,id:t,paramKey:n})=>{const s=document.getElementById(t);if(!s){console.warn(`Filter container not found for ID: ${t}`);return}const i=getUniqueValues(e);if(s.querySelector(".filter-button-container")?.remove(),i.length===0)return;const o=document.createElement("div");o.className="flex flex-wrap gap-2 filter-button-container",i.forEach(t=>{const n=document.createElement("button");n.textContent=t,n.className="filter-button px-3 py-1 text-sm rounded-full bg-gray-200 text-gray-700 hover:bg-blue-100 transition duration-150 whitespace-nowrap",n.dataset.field=e,n.dataset.value=t,n.addEventListener("click",handleFilterClick),state.filters[e]===t&&n.classList.add("active-filter"),o.appendChild(n)}),s.appendChild(o)}),document.getElementById("clear-filters").addEventListener("click",clearAllFilters)}function handleFilterClick(e){const{field:t,value:s}=e.target.dataset,n=e.target.classList.contains("active-filter");Object.values(document.querySelectorAll(`[data-field="${t}"]`)).forEach(e=>e.classList.remove("active-filter")),n?state.filters[t]=null:(state.filters[t]=s,e.target.classList.add("active-filter")),trackEvent("filter_used",{filter_category:t,filter_value:n?"cleared":s,action:n?"clear":"set"}),renderProducts()}function handleSearchInput(e){state.searchQuery=e.target.value.toLowerCase().trim(),trackEvent("search",{search_term:state.searchQuery}),renderProducts()}function clearAllFilters(e){e&&e.preventDefault(),state.searchQuery="",state.filters={ProductID:null,GradeLevel:null,Topic:null,ProductType:null};const t=window.location.origin+window.location.pathname;window.history.pushState({},document.title,t),document.getElementById("search").value="",initFilters(),Object.values(document.querySelectorAll(".filter-button")).forEach(e=>e.classList.remove("active-filter")),trackEvent("filters_cleared"),renderProducts()}function filterProducts(){if(state.filters.ProductID){const e=allProducts.find(e=>e.ProductID===state.filters.ProductID)||freebieProducts.find(e=>e.ProductID===state.filters.ProductID);return e?[e]:[]}return allProducts.filter(e=>{if(!e.InStock)return!1;const t=state.searchQuery;if(t){const n=`${e.ProductTitle} ${e.Tags}`.toLowerCase();if(!n.includes(t))return!1}for(const t in state.filters){if(t==="ProductID"||state.filters[t]===null)continue;const n=state.filters[t];if(n&&e[t]!==n)return!1}return!0})}function renderFreebieCard(e){const t=e.PricePHPDiscounted===.01,n=e.GradeLevel?`Grade ${e.GradeLevel}`:"All Grades",s=t?'<span class="text-3xl font-extrabold text-amber-600">FREE</span>':`<span class="text-xs text-gray-500 line-through">${formatCurrency(e.PricePHPRegular)}</span><span class="text-2xl font-extrabold text-red-600">${formatCurrency(e.PricePHPDiscounted)}</span>`,o=t?"Get Freebie":"View & Buy",i=t?"bg-amber-500 text-white shadow-xl hover:bg-amber-600":"bg-blue-700 text-white shadow-md hover:bg-blue-800",a=t?"freebie-card border-4 border-amber-500 transform hover:scale-[1.01]":"border border-gray-200",r=t?'<span class="absolute top-3 left-3 bg-amber-500 text-white text-md font-bold px-4 py-1 rounded-full shadow-lg z-10 animate-pulse">⭐ FREE OFFER!</span>':"",c=t?"freebie_click":"product_view_buy",l=`onclick="trackEvent('${c}', {product_id: '${e.ProductID}'})"`;return`
                <div class="product-card bg-white rounded-xl overflow-hidden shadow-xl ${a} transition duration-300">
                    <div class="relative bg-gray-100 overflow-hidden h-48">
                        <img class="w-full h-full object-cover transition duration-300 ease-in-out hover:scale-105" src="${e.ImageURL}" alt="${e.ProductTitle}" onerror="this.onerror=null; this.src='https://placehold.co/400x300/4A5568/ffffff?text=${t?"FREEBIE":"Image+Not+Found"}'">
                        ${r}
                    </div>

                    <div class="p-5">
                        <h3 class="text-xl font-extrabold text-gray-900 line-clamp-2 min-h-[56px]">${e.ProductTitle}</h3>
                        
                        <div class="flex flex-wrap gap-2 mt-2 text-xs font-medium">
                            ${t?'<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full">FREE</span>':""}
                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${e.Topic}</span>
                            <span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full">${e.ProductType}</span>
                            <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full">${n}</span>
                        </div>

                        <p class="mt-3 text-sm text-gray-600 line-clamp-3 min-h-[60px]">${e.ShortDescription}</p>

                        <div class="mt-4 flex flex-wrap items-center justify-between gap-2">
                            <div class="flex flex-col">
                                ${s}
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="handleShareClick('${e.ProductID}', event)" 
                                        class="share-button px-3 py-2 bg-gray-400 text-white text-sm font-semibold rounded-lg shadow hover:bg-gray-500 transition duration-150 transform hover:scale-105">
                                    <svg class="w-4 h-4 inline-block align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.88 12.834 9 12.296 9 11.5c0-1.042-.16-2.075-.477-3.033M12 7h1.5a4 4 0 014 4v1m-4-7h2m-4 13h2M8.684 13.342c-.305.464-.627.915-.992 1.341a4.343 4.343 0 00-.776 1.956 2.33 2.33 0 01-2.22 2.19M18.823 10C17.755 10 17 9.317 17 8.5c0-.818.755-1.5 1.823-1.5s1.823.682 1.823 1.5c0 .818-.755 1.5-1.823 1.5z"></path></svg>
                                    Share
                                </button>
                                <a href="${e.ProductPagePath}" target="_blank" ${l} class="px-5 py-2 text-sm font-semibold rounded-lg transition duration-150 transform hover:scale-105 ${i}">
                                    ${o}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `}function renderProductCard(e){const n=e.IsDiscounted&&e.PricePHPRegular>e.PricePHPDiscounted,s=e.PricePHPDiscounted===.01,o=formatCurrency(e.PricePHPRegular),a=formatCurrency(e.PricePHPDiscounted);let i="";if(n&&e.PricePHPRegular>0&&!s){const t=Math.round((e.PricePHPRegular-e.PricePHPDiscounted)/e.PricePHPRegular*100);i=`${t}% OFF`}const r=e.GradeLevel?`Grade ${e.GradeLevel}`:"All Grades";let t;return s?t=`<span class="text-xs text-gray-500 line-through">${o}</span><span class="text-2xl font-extrabold text-amber-600">FREE</span>`:n?t=`<span class="text-xs text-gray-500 line-through">${o}</span><span class="text-2xl font-extrabold text-red-600">${a}</span>`:t=`<span class="text-2xl font-extrabold text-blue-900">${o}</span>`,`
                <div class="product-card bg-white rounded-xl overflow-hidden shadow-xl border border-gray-200">
                    <div class="relative bg-gray-100 overflow-hidden h-48">
                        <img class="w-full h-full object-cover transition duration-300 ease-in-out hover:scale-105" src="${e.ImageURL}" alt="${e.ProductTitle}" onerror="this.onerror=null; this.src='https://placehold.co/400x300/4A5568/ffffff?text=Image+Not+Found'">
                        
                        ${s?'<span class="absolute top-3 right-3 bg-amber-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md z-10">FREE</span>':n?`<span class="absolute top-3 right-3 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md z-10">${i}</span>`:""}
                    </div>

                    <div class="p-5">
                        <h3 class="text-xl font-extrabold text-gray-900 line-clamp-2 min-h-[56px]">${e.ProductTitle}</h3>
                        
                        <div class="flex flex-wrap gap-2 mt-2 text-xs font-medium">
                            <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${e.Topic}</span>
                            <span class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded-full">${e.ProductType}</span>
                            <span class="bg-gray-200 text-gray-700 px-2 py-1 rounded-full">${r}</span>
                        </div>

                        <p class="mt-3 text-sm text-gray-600 line-clamp-3 min-h-[60px]">${e.ShortDescription}</p>

                        <div class="mt-4 flex flex-wrap items-center justify-between gap-2">
                            <div class="flex flex-col">
                                ${t}
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="handleShareClick('${e.ProductID}', event)" 
                                        class="share-button px-3 py-2 bg-gray-400 text-white text-sm font-semibold rounded-lg shadow hover:bg-gray-500 transition duration-150 transform hover:scale-105">
                                    <svg class="w-4 h-4 inline-block align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.88 12.834 9 12.296 9 11.5c0-1.042-.16-2.075-.477-3.033M12 7h1.5a4 4 0 014 4v1m-4-7h2m-4 13h2M8.684 13.342c-.305.464-.627.915-.992 1.341a4.343 4.343 0 00-.776 1.956 2.33 2.33 0 01-2.22 2.19M18.823 10C17.755 10 17 9.317 17 8.5c0-.818.755-1.5 1.823-1.5s1.823.682 1.823 1.5c0 .818-.755 1.5-1.823 1.5z"></path></svg>
                                    Share
                                </button>
                                <a href="${e.ProductPagePath}" target="_blank" class="px-5 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg shadow-md hover:bg-blue-800 transition duration-150 transform hover:scale-105">
                                    View & Buy
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `}function renderProducts(){const t=filterProducts(),e=document.getElementById("freebie-list"),n=document.getElementById("product-list"),s=document.getElementById("no-results");state.filters.ProductID?e.classList.add("hidden"):freebieProducts.length>0?(e.innerHTML=freebieProducts.map(renderFreebieCard).join(""),e.classList.remove("hidden")):e.classList.add("hidden"),n.innerHTML="";const o=t.length===0&&(state.searchQuery!==""||Object.values(state.filters).some(e=>e!==null));o?s.classList.remove("hidden"):(s.classList.add("hidden"),t.forEach(e=>{n.innerHTML+=renderProductCard(e)}))}document.addEventListener("DOMContentLoaded",()=>{fetchProducts()})</script></body></html>